
# What Happened When Trying to Use Socket.io in A Multi-Page Game

Don’t. Do not try passing sockets through different pages, or if this warning wasn’t enough, then I can only advise you to be ready to go through endless cycles of trial and error. May 17, 2022, I finished my last AP of the year. That day, as soon as I left the testing gym, I headed to the nearest student and asked what period of the day it was.  Any other student given the choice to leave after an AP exam would have chosen to leave, but not me whose Final Project was still considerably obsolete with less than a week before the due date left. Getting to the classroom, I surprised my teammates before kickstarting calculations on the highest grade we could get for the project (with a moderate B as our answer). If you do not want to be in the same situation as us, continue to read this blog post. With the time ticking, we somehow managed to produce a semi working project in mere days despite being on standhold for months- how? 

## WHAT IS SOCKET.IO?
Socket.io is a powerful tool that allows for bidirectional communication and real time updates. A common and basic application of Socket.io are chats, where users interact with each other despite using different devices linked by being in the same socket instance. For my team’s project, we decided to create a Uno game (renamed Oden and later repurposed to become a reaction game). Uno is multiplayer, and thus we needed Socket.io to update in real time between each player. The idea is to have a client side and a server side. As the name suggests, the client side is what the players see and inputs, while the server side receives the client side’s inputs and outputs to the client side. There is only one server, but there could be multiple clients, and the actions of one client would be returned back to the server to be displayed to the other clients. More in depth explanation could be found in the official documentation which I linked below. 
>> Check out Socket.io’s documentation: https://socket.io/docs/v4/

## THE START OF THE PROBLEM
Because my group had decided early on the year to use Nuxt (which made linking pages simpler), we were determined to have multiple pages instead of building a Single Page Application. The result was completed css, a filled folder for pages, and a website that does not work. Fast forward to May, two weeks before the due date, we finally overcame our stubborn insistence with pages and revamped the entire code to become components. What does that mean? In the initial draft of our website, the first page that the user loads into would be a file called index.vue. The next potential page the user would be transported to would be a waiting page (which needs a socket to create a room and code), but because we can not transport sockets between pages, we turned the previous waiting page (called host.vue) to a component (Host.vue) by simply shifting the location of the file from the folder pages to the folder components. Vuejs is user friendly and has inbuilt abilities to automatically change the page to a component, so this portion of the process was a lot simpler than it sounded. And within days of changing the code and linking the back end, our site worked. So what is the solution to incorporating Socket.io to Multi-Page Applications?

## SOLUTION
Select the pages you want to become components and drag it to the component folder, simple as that (Vue converts your pages to become components). Having pages is simply not worth it because each socket instance has a very specific way of being created. And so trying to pass the same socket instance between pages is bound to fail, causing instead of having the same instance being passed, a new instance would form whenever you enter a new page. The only problem to our rushed solution is that you can not reload the game. If you click reload, you’ll be automatically removed from the game because the game was nested in components and not as a definite page. So the url would still be, for example my team’s game: codeblooded.netlify.app even when the game is playing, and so a reload would cause the components to be removed. This factor has held my team back from changing the pages to components, but we compromised with the temporary solution. 
If you came to this article on how to actually use Socket.io, you came to the wrong source. There are already a lot of articles on incorporating Socket.io into your applications. My goal for writing this blog is to potentially save time for future projects/teams who may have the same issues/concerns as my team had this year. Hence, the title to this article have the keywords “Socket.io” and “Multi-Page”. In all the time I was researching Socket.io, there was no article specifically warning me of the troubles of passing Socket.io through pages, and even less about how to create a game with Vuejs in comparison to React. 
